---
# tasks file for build
- name: Ensure package is present
  apt:
    name: "{{item}}"
    state: present
  with_items:
    - default-jdk
    - maven

- name: Git clone repo
  git:
    repo: https://github.com/Artur-/Solitaire.git
    dest: "{{app_repo_dir}}"

- name: Create maven artifact
  command: mvn package
  args:
    chdir: "{{app_repo_dir}}"

- name: Copy artifact from Build to local
  fetch:
    src: "{{app_repo_dir}}/target/solitaire-1.1-SNAPSHOT.war"
    dest: /home/user/solitaire.war
    flat: yes

